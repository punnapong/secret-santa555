<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏à‡∏±‡∏ö‡∏â‡∏•‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà üéÅ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background:#f7f7f7; padding:20px; }
    .box { max-width:500px; margin:auto; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    h2 { text-align:center; }
    input, button { width:100%; padding:10px; margin-top:10px; font-size:16px; }
    button { background:#4CAF50; color:white; border:none; border-radius:5px; }
    button:hover { background:#45a049; }
    #result { margin-top:20px; font-size:18px; text-align:center; }
  </style>
</head>
<body>

<div class="box">
  <h2>üéÅ ‡∏à‡∏±‡∏ö‡∏â‡∏•‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà</h2>
  <p>‡πÉ‡∏™‡πà <b>‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</b> ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£<br>
     <small>(‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</small></p>

  <input id="name" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" />
  <button onclick="draw()">‡∏à‡∏±‡∏ö‡∏â‡∏•‡∏≤‡∏Å</button>

  <div id="result"></div>
</div>

<script>
  // ===== ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ) =====
  const people = [
    "‡πÄ‡∏ï‡∏¥‡∏£‡πå‡∏î",
    "‡πÄ‡∏ö‡∏¥‡∏£‡πå‡∏î",
    "‡πÄ‡∏°‡∏¢‡πå",
    "‡πÑ‡∏ö‡∏£‡πå‡∏ó"
  ];

  // ===== ‡∏™‡∏∏‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ =====
  let shuffled = [...people];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }

  const pairs = {};
  for (let i = 0; i < people.length; i++) {
    let receiver = shuffled[i];
    if (receiver === people[i]) {
      receiver = shuffled[(i + 1) % people.length];
      shuffled[(i + 1) % people.length] = shuffled[i];
    }
    pairs[people[i]] = receiver;
  }

  // ===== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏à‡∏≤‡∏Å localStorage =====
  let drawn = JSON.parse(localStorage.getItem("drawn_people") || "{}");

  function draw() {
    const name = document.getElementById("name").value.trim();
    const result = document.getElementById("result");

    if (!pairs[name]) {
      result.innerHTML = "‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö";
      return;
    }

    if (drawn[name]) {
      result.innerHTML = `‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏ö‡∏â‡∏•‡∏≤‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß<br>üéÅ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÉ‡∏´‡πâ <b>${drawn[name]}</b>`;
      return;
    }

    drawn[name] = pairs[name];
    localStorage.setItem("drawn_people", JSON.stringify(drawn));

    result.innerHTML = `üéÅ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡πÉ‡∏´‡πâ <b>${pairs[name]}</b><br><small>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ</small>`;
  }
</script>

</body>
</html>
